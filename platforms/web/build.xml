<project>
    <import file="../../common.xml"/>

    <resources id="css.index" refid="css.all"/>

    <resources id="js.index">
        <resources refid="js.libs" />
        <resources refid="js.common" />
        <resources refid="js.storage" />
        <resources refid="js.router" />
        <resources refid="js.templates" />
        <resources refid="js.models" />
        <resources refid="js.views" />
        <resources refid="js.collectors" />
        <resources refid="js.observers" />
        <fileset file="${listit.js.platforms.dir}/web/web-setup.js" />
        <resources refid="js.setup" />
    </resources>

    <target name="-build.img" depends="-build.setup">
        <deploy-img dest="${build.img.dir}"/>
    </target>

    <target name="-build.assets" depends="-build.setup">
        <mkdir dir="${build.css.dir}" />
        <mkdir dir="${build.js.dir}" />
        <deploy-resource name="index" />
    </target>

    <target name="-build.html" depends="-build.setup">
        <deploy-html resource="index" />
    </target>

    <target name="release" depends="-build.setup,-build.img,-build.assets,-build.html">
        <copy todir="${deploy.dir}">
            <fileset dir="${build.dir}" />
        </copy>
    </target>

    <target name="debug" depends="-build.setup">
        <deploy-resource-debug name="index" />
        <deploy-html resource="index" />

        <mkdir dir="${debug.dir}" />
        <copy todir="${debug.dir}" overwrite="true" flatten="true">
            <filelist dir="${build.dir}">
                <file name="index.html" />
            </filelist>
        </copy>
        <symlink overwrite="yes" link="${debug.dir}/js" resource="${listit.dir}/js" />
        <symlink overwrite="yes" link="${debug.dir}/css" resource="${listit.dir}/css" />
        <symlink overwrite="yes" link="${debug.dir}/img" resource="${listit.dir}/img" />
    </target>

</project>


